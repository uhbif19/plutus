<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- editorconfig-checker-disable-file</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes   #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds       #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DefaultSignatures     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia           #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds             #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes            #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables   #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving    #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">-- | Internal module defining the core machinery of configurable pretty-printing.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- We introduce an internal module, because most users won't need stuff like 'DefaultPrettyBy', so</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- it doesn't make much sense to export that from the top-level module. But 'DefaultPrettyBy' can</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- still can be useful occasionally and there are some docs explaining details of the implementation</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- (see e.g. 'DispatchPrettyDefaultBy'), hence it's exported from here.</span><span>
</span><span id="line-25"></span><span class="hs-comment">--</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- Versioning is not affected by the fact that the module is called \&quot;Internal\&quot;, i.e. we track</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- changes using the usual PVP.</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Text.PrettyBy.Internal</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier">PrettyBy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier">HasPrettyDefaults</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#IgnorePrettyConfig"><span class="hs-identifier">IgnorePrettyConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier">AttachPrettyConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#withAttachPrettyConfig"><span class="hs-identifier">withAttachPrettyConfig</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyFunctorBy"><span class="hs-identifier">defaultPrettyFunctorBy</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyBifunctorBy"><span class="hs-identifier">defaultPrettyBifunctorBy</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier">StarsOfHead</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier">DispatchDefaultFor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultFor"><span class="hs-identifier">DefaultFor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier">AttachDefaultPrettyConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier">DefaultPrettyBy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#NonDefaultPrettyBy"><span class="hs-identifier">NonDefaultPrettyBy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier">PrettyDefaultBy</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier">ThrowOnStuck</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaultsStuckError"><span class="hs-identifier">HasPrettyDefaultsStuckError</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#NonStuckHasPrettyDefaults"><span class="hs-identifier">NonStuckHasPrettyDefaults</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchPrettyDefaultBy"><span class="hs-identifier">DispatchPrettyDefaultBy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyAny"><span class="hs-identifier">PrettyAny</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.Pretty.html"><span class="hs-identifier">Text.Pretty</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Const</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Int</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Void</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Natural</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- ##########################</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- ## The 'PrettyBy' class ##</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- ##########################</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | A class for pretty-printing values in a configurable manner.</span><span>
</span><span id="line-74"></span><span class="hs-comment">--</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- A basic example:</span><span>
</span><span id="line-76"></span><span class="hs-comment">--</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- &gt;&gt;&gt; data Case = UpperCase | LowerCase</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy Case D where prettyBy UpperCase D = &quot;D&quot;; prettyBy LowerCase D = &quot;d&quot;</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy UpperCase D</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy LowerCase D</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- d</span><span>
</span><span id="line-84"></span><span class="hs-comment">--</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- The library provides instances for common types like 'Integer' or 'Bool', so you can't define</span><span>
</span><span id="line-86"></span><span class="hs-comment">-- your own @PrettyBy SomeConfig Integer@ instance. And for the same reason you should not define</span><span>
</span><span id="line-87"></span><span class="hs-comment">-- instances like @PrettyBy SomeAnotherConfig a@ for universally quantified @a@, because such an</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- instance would overlap with the existing ones. Take for example</span><span>
</span><span id="line-89"></span><span class="hs-comment">--</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- &gt;&gt;&gt; data ViaShow = ViaShow</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- &gt;&gt;&gt; instance Show a =&gt; PrettyBy ViaShow a where prettyBy ViaShow = pretty . show</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- with such an instance @prettyBy ViaShow (1 :: Int)@ throws an error about overlapping instances:</span><span>
</span><span id="line-94"></span><span class="hs-comment">--</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- &gt; &#8226; Overlapping instances for PrettyBy ViaShow Int</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- &gt;     arising from a use of &#8216;prettyBy&#8217;</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- &gt;   Matching instances:</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- &gt;     instance PrettyDefaultBy config Int =&gt; PrettyBy config Int</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- &gt;     instance [safe] Show a =&gt; PrettyBy ViaShow a</span><span>
</span><span id="line-100"></span><span class="hs-comment">--</span><span>
</span><span id="line-101"></span><span class="hs-comment">-- There's a @newtype@ provided specifically for the purpose of defining a 'PrettyBy' instance for</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- any @a@: 'PrettyAny'. Read its docs for details on when you might want to use it.</span><span>
</span><span id="line-103"></span><span class="hs-comment">--</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- The 'PrettyBy' instance for common types is defined in a way that allows to override default</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- pretty-printing behaviour, read the docs of 'HasPrettyDefaults' for details.</span><span>
</span><span id="line-106"></span><span class="hs-keyword">class</span><span> </span><span id="PrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-var">PrettyBy</span></a></span></span><span> </span><span id="local-6989586621679059209"><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059208"><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-comment">-- | Pretty-print a value of type @a@ the way a @config@ specifies it.</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- The default implementation of 'prettyBy' is in terms of 'pretty', 'defaultPrettyFunctorBy'</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">-- or 'defaultPrettyBifunctorBy' depending on the kind of the data type that you're providing</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-comment">-- an instance for. For example, the default implementation of 'prettyBy' for a monomorphic type</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">-- is going to be &quot;ignore the config and call 'pretty' over the value&quot;:</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; newtype N = N Int deriving newtype (Pretty)</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy () N</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (N 42)</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-comment">-- 42</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">-- The default implementation of 'prettyBy' for a 'Functor' is going to be in terms of</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- 'defaultPrettyFunctorBy':</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; newtype N a = N a deriving stock (Functor) deriving newtype (Pretty)</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy () a =&gt; PrettyBy () (N a)</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (N (42 :: Int))</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-comment">-- 42</span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-comment">-- It's fine for the data type to have a phantom parameter as long as the data type is still a</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-comment">-- 'Functor' (i.e. the parameter has to be of kind @Type@). Then 'defaultPrettyFunctorBy' is used</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-comment">-- again:</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; newtype N a = N Int deriving stock (Functor) deriving newtype (Pretty)</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy () (N b)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (N 42)</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-comment">-- 42</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-comment">-- If the data type has a single parameter of any other kind, then it's not a functor and so</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-comment">-- like in the monomorphic case 'pretty' is used:</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; newtype N (b :: Bool) = N Int deriving newtype (Pretty)</span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy () (N b)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (N 42)</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-comment">-- 42</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-comment">-- Same applies to a data type with two parameters: if both the parameters are of kind @Type@,</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-comment">-- then the data type is assumed to be a 'Bifunctor' and hence 'defaultPrettyBifunctorBy' is</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-comment">-- used. If the right parameter is of kind @Type@ and the left parameter is of any other kind,</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-comment">-- then we fallback to assuming the data type is a 'Functor' and defining 'prettyBy' as</span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-comment">-- 'defaultPrettyFunctorBy'. If both the parameters are not of kind @Type@, we fallback to</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-comment">-- implementing 'prettyBy' in terms of 'pretty' like in the monomorphic case.</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-comment">-- Note that in all those cases a 'Pretty' instance for the data type has to already exist,</span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-comment">-- so that we can derive a 'PrettyBy' one in terms of it. If it doesn't exist or if your data</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-comment">-- type is not supported (for example, if it has three or more parameters of kind @Type@), then</span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- you'll need to provide the implementation manually.</span><span>
</span><span id="line-154"></span><span>    </span><span id="prettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyBy"><span class="hs-identifier hs-type">prettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059190"><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059190"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="prettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyBy"><span class="hs-identifier hs-type">prettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059207"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultFor"><span class="hs-identifier hs-type">DefaultFor</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;prettyBy&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059207"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621679058576"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyBy"><span class="hs-identifier hs-var hs-var">prettyBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (target :: Symbol) config a ann.
DefaultFor target config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultFor"><span class="hs-identifier hs-var">defaultFor</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;prettyBy&quot;</span></span></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-comment">-- Defaulting to 'prettyList' would require the user to either provide a 'Pretty' instance for</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-comment">-- each data type implementing 'PrettyBy' or to supply the sensible default implementation as</span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-comment">-- 'defaultPrettyFunctorBy' manually and both the options are silly.</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- | 'prettyListBy' is used to define the default 'PrettyBy' instance for @[a]@ and @NonEmpty a@.</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- In normal circumstances only the 'prettyBy' function is used.</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-comment">-- The default implementation of 'prettyListBy' is in terms of 'defaultPrettyFunctorBy'.</span><span>
</span><span id="line-164"></span><span>    </span><span id="prettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-type">prettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059191"><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059191"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="prettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-type">prettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059201"><span class="annot"><a href="#local-6989586621679059209"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059208"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059201"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621679058571"><span class="annot"><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-var hs-var">prettyListBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) config a ann.
(Functor f, Pretty (f (AttachPrettyConfig config a))) =&gt;
config -&gt; f a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyFunctorBy"><span class="hs-identifier hs-var">defaultPrettyFunctorBy</span></a></span></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-comment">-- #########################################</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- ## The 'HasPrettyDefaults' type family ##</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- #########################################</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Determines whether a pretty-printing config allows default pretty-printing for types that</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- support it. I.e. it's possible to create a new config and get access to pretty-printing for</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- all types supporting default pretty-printing just by providing the right type instance. Example:</span><span>
</span><span id="line-175"></span><span class="hs-comment">--</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- &gt;&gt;&gt; data DefCfg = DefCfg</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- &gt;&gt;&gt; type instance HasPrettyDefaults DefCfg = 'True</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy DefCfg (['a', 'b', 'c'], (1 :: Int), Just True)</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- (abc, 1, True)</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- The set of types supporting default pretty-printing is determined by the @prettyprinter@</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- library: whatever __there__ has a 'Pretty' instance also supports default pretty-printing</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- in this library and the behavior of @pretty x@ and @prettyBy config_with_defaults x@ must</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- be identical when @x@ is one of such types.</span><span>
</span><span id="line-185"></span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- It is possible to override default pretty-printing. For this you need to specify that</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- 'HasPrettyDefaults' is @'False@ for your config and then define a @NonDefaultPrettyBy config@</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- instance for each of the types supporting default pretty-printing that you want to pretty-print</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- values of. Note that once 'HasPrettyDefaults' is specified to be @'False@,</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- __all defaults are lost__ for your config, so you can't override default pretty-printing for one</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- type and keep the defaults for all the others. I.e. if you have</span><span>
</span><span id="line-192"></span><span class="hs-comment">--</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- &gt;&gt;&gt; data NonDefCfg = NonDefCfg</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- &gt;&gt;&gt; type instance HasPrettyDefaults NonDefCfg = 'False</span><span>
</span><span id="line-195"></span><span class="hs-comment">--</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- then you have no defaults available and an attempt to pretty-print a value of a type supporting</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- default pretty-printing</span><span>
</span><span id="line-198"></span><span class="hs-comment">--</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- &gt; prettyBy NonDefCfg True</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- results in a type error:</span><span>
</span><span id="line-202"></span><span class="hs-comment">--</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- &gt; &#8226; No instance for (NonDefaultPrettyBy NonDef Bool)</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- &gt;      arising from a use of &#8216;prettyBy&#8217;</span><span>
</span><span id="line-205"></span><span class="hs-comment">--</span><span>
</span><span id="line-206"></span><span class="hs-comment">-- As the error suggests you need to provide a 'NonDefaultPrettyBy' instance explicitly:</span><span>
</span><span id="line-207"></span><span class="hs-comment">--</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- &gt;&gt;&gt; instance NonDefaultPrettyBy NonDefCfg Bool where nonDefaultPrettyBy _ b = if b then &quot;t&quot; else &quot;f&quot;</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy NonDefCfg True</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- t</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- It is also possible not to provide any implementation for 'nonDefaultPrettyBy', in which case</span><span>
</span><span id="line-213"></span><span class="hs-comment">-- it defaults to being the default pretty-printing for the given type. This can be useful to</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- recover default pretty-printing for types pretty-printing of which you don't want to override:</span><span>
</span><span id="line-215"></span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- &gt;&gt;&gt; instance NonDefaultPrettyBy NonDefCfg Int</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy NonDefCfg (42 :: Int)</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- 42</span><span>
</span><span id="line-219"></span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- Look into @test/NonDefault.hs@ for an extended example.</span><span>
</span><span id="line-221"></span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- We could give the user more fine-grained control over what defaults to override instead of</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- requiring to explicitly provide all the instances whenever there's a need to override any</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- default behavior, but that would complicate the library even more, so we opted for not doing</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- that at the moment.</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- Note that you can always override default behavior by wrapping a type in @newtype@ and</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- providing a @PrettyBy config_name@ instance for that @newtype@.</span><span>
</span><span id="line-229"></span><span class="hs-comment">--</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- Also note that if you want to extend the set of types supporting default pretty-printing</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- it's not enough to provide a 'Pretty' instance for your type (such logic is hardly expressible</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- in present day Haskell). Read the docs of 'DefaultPrettyBy' for how to extend the set of types</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- supporting default pretty-printing.</span><span>
</span><span id="line-234"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="HasPrettyDefaults"><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-var">HasPrettyDefaults</span></a></span></span><span> </span><span id="local-6989586621679058565"><span class="annot"><a href="#local-6989586621679058565"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- | @prettyBy ()@ works like @pretty@ for types supporting default pretty-printing.</span><span>
</span><span id="line-237"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="HasPrettyDefaults"><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-var">HasPrettyDefaults</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">True</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- ###########################</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- ## Interop with 'Pretty' ##</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- ###########################</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- | A newtype wrapper around @a@ whose point is to provide a @PrettyBy config@ instance</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- for anything that has a 'Pretty' instance.</span><span>
</span><span id="line-245"></span><span class="hs-keyword">newtype</span><span> </span><span id="IgnorePrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#IgnorePrettyConfig"><span class="hs-identifier hs-var">IgnorePrettyConfig</span></a></span></span><span> </span><span id="local-6989586621679059193"><span class="annot"><a href="#local-6989586621679059193"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IgnorePrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#IgnorePrettyConfig"><span class="hs-identifier hs-var">IgnorePrettyConfig</span></a></span></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unIgnorePrettyConfig"><span class="annot"><span class="annottext">forall a. IgnorePrettyConfig a -&gt; a
</span><a href="Text.PrettyBy.Internal.html#unIgnorePrettyConfig"><span class="hs-identifier hs-var hs-var">unIgnorePrettyConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679059193"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- &gt;&gt;&gt; data Cfg = Cfg</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- &gt;&gt;&gt; instance Pretty D where pretty D = &quot;D&quot;</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy Cfg $ IgnorePrettyConfig D</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058560"><span id="local-6989586621679059188"><span id="local-6989586621679059189"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679059189"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059188"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#IgnorePrettyConfig"><span class="hs-identifier hs-type">IgnorePrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059189"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679058557"><span class="annot"><span class="annottext">prettyBy :: forall ann. config -&gt; IgnorePrettyConfig a -&gt; Doc ann
</span><a href="#local-6989586621679058557"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyBy</span></a></span></span><span> </span><span class="annot"><span class="annottext">config
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IgnorePrettyConfig a -&gt; a
</span><a href="Text.PrettyBy.Internal.html#unIgnorePrettyConfig"><span class="hs-identifier hs-var">unIgnorePrettyConfig</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-comment">-- | A config together with some value. The point is to provide a 'Pretty' instance</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- for anything that has a @PrettyBy config@ instance.</span><span>
</span><span id="line-260"></span><span class="hs-keyword">data</span><span> </span><span id="AttachPrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-var">AttachPrettyConfig</span></a></span></span><span> </span><span id="local-6989586621679059172"><span class="annot"><a href="#local-6989586621679059172"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059171"><span class="annot"><a href="#local-6989586621679059171"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AttachPrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-var">AttachPrettyConfig</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679059172"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679059171"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- &gt;&gt;&gt; data Cfg = Cfg</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy Cfg D where prettyBy Cfg D = &quot;D&quot;</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- &gt;&gt;&gt; pretty $ AttachPrettyConfig Cfg D</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-268"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058551"><span id="local-6989586621679059198"><span id="local-6989586621679059199"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059199"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059198"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059199"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059198"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621679058548"><span class="annot"><span class="annottext">pretty :: forall ann. AttachPrettyConfig config a -&gt; Doc ann
</span><a href="#local-6989586621679058548"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span id="local-6989586621679058547"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058547"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679058546"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058546"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann. PrettyBy config a =&gt; config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#prettyBy"><span class="hs-identifier hs-var">prettyBy</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058547"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058546"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-comment">-- | Pass @AttachPrettyConfig config@ to the continuation.</span><span>
</span><span id="line-272"></span><span id="local-6989586621679059178"><span id="local-6989586621679059180"><span class="annot"><a href="Text.PrettyBy.Internal.html#withAttachPrettyConfig"><span class="hs-identifier hs-type">withAttachPrettyConfig</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679059180"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679059179"><span class="annot"><a href="#local-6989586621679059179"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679059179"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059180"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059179"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059178"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059178"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-274"></span><span id="withAttachPrettyConfig"><span class="annot"><span class="annottext">withAttachPrettyConfig :: forall config r.
config -&gt; ((forall a. a -&gt; AttachPrettyConfig config a) -&gt; r) -&gt; r
</span><a href="Text.PrettyBy.Internal.html#withAttachPrettyConfig"><span class="hs-identifier hs-var hs-var">withAttachPrettyConfig</span></a></span></span><span> </span><span id="local-6989586621679058545"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058545"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679058544"><span class="annot"><span class="annottext">(forall a. a -&gt; AttachPrettyConfig config a) -&gt; r
</span><a href="#local-6989586621679058544"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall a. a -&gt; AttachPrettyConfig config a) -&gt; r
</span><a href="#local-6989586621679058544"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall config a. config -&gt; a -&gt; AttachPrettyConfig config a
</span><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-var">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058545"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-comment">-- | Default configurable pretty-printing for a 'Functor' in terms of 'Pretty'.</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- Attaches the config to each value in the functor and calls 'pretty' over the result,</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- i.e. the spine of the functor is pretty-printed the way the 'Pretty' class specifies it,</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- while the elements are printed by 'prettyBy'.</span><span>
</span><span id="line-280"></span><span id="local-6989586621679059194"><span id="local-6989586621679059195"><span id="local-6989586621679059196"><span id="local-6989586621679059197"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyFunctorBy"><span class="hs-identifier hs-type">defaultPrettyFunctorBy</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059197"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059197"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059196"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059195"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059196"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059197"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059195"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059194"><span class="hs-identifier hs-type">ann</span></a></span></span></span></span></span><span>
</span><span id="line-283"></span><span id="defaultPrettyFunctorBy"><span class="annot"><span class="annottext">defaultPrettyFunctorBy :: forall (f :: * -&gt; *) config a ann.
(Functor f, Pretty (f (AttachPrettyConfig config a))) =&gt;
config -&gt; f a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyFunctorBy"><span class="hs-identifier hs-var hs-var">defaultPrettyFunctorBy</span></a></span></span><span> </span><span id="local-6989586621679058539"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058539"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679058538"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679058538"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall config a. config -&gt; a -&gt; AttachPrettyConfig config a
</span><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-var">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058539"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621679058538"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- | Default configurable pretty-printing for a 'Bifunctor' in terms of 'Pretty'</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- Attaches the config to each value in the bifunctor and calls 'pretty' over the result,</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- i.e. the spine of the bifunctor is pretty-printed the way the 'Pretty' class specifies it,</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- while the elements are printed by 'prettyBy'.</span><span>
</span><span id="line-290"></span><span id="local-6989586621679059159"><span id="local-6989586621679059160"><span id="local-6989586621679059161"><span id="local-6989586621679059162"><span id="local-6989586621679059163"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyBifunctorBy"><span class="hs-identifier hs-type">defaultPrettyBifunctorBy</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Bifunctor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059163"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059163"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059162"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059161"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059162"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059160"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059162"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059163"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059161"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059160"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059159"><span class="hs-identifier hs-type">ann</span></a></span></span></span></span></span></span><span>
</span><span id="line-293"></span><span id="defaultPrettyBifunctorBy"><span class="annot"><span class="annottext">defaultPrettyBifunctorBy :: forall (f :: * -&gt; * -&gt; *) config a b ann.
(Bifunctor f,
 Pretty
   (f (AttachPrettyConfig config a) (AttachPrettyConfig config b))) =&gt;
config -&gt; f a b -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyBifunctorBy"><span class="hs-identifier hs-var hs-var">defaultPrettyBifunctorBy</span></a></span></span><span> </span><span id="local-6989586621679058532"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058532"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679058531"><span class="annot"><span class="annottext">f a b
</span><a href="#local-6989586621679058531"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">forall config r.
config -&gt; ((forall a. a -&gt; AttachPrettyConfig config a) -&gt; r) -&gt; r
</span><a href="Text.PrettyBy.Internal.html#withAttachPrettyConfig"><span class="hs-identifier hs-var">withAttachPrettyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058532"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679058530"><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058530"><span class="hs-identifier hs-var">attach</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058530"><span class="hs-identifier hs-var">attach</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058530"><span class="hs-identifier hs-var">attach</span></a></span><span> </span><span class="annot"><span class="annottext">f a b
</span><a href="#local-6989586621679058531"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">-- ##################################################################################</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- ## Dispatching between default implementations for 'prettyBy'/'defaultPrettyBy' ##</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- ##################################################################################</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-comment">-- | Return the longest sequence of @Type@ in the kind (right-to-left) of the head of an application.</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- (but no longer than @Type -&gt; Type -&gt; Type@, because we can't support longer ones in 'DispatchDefaultFor').</span><span>
</span><span id="line-302"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679058528"><span class="annot"><a href="#local-6989586621679058528"><span class="hs-identifier hs-type">target</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Symbol</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679058527"><span class="annot"><a href="#local-6989586621679058527"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-303"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058522"><span id="local-6989586621679058523"><span id="local-6989586621679058524"><span id="local-6989586621679058525"><span id="local-6989586621679058526"><span class="annot"><a href="#local-6989586621679058526"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058525"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679058524"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058523"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058522"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-special">(</span><span>     </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Automatic derivation of &#8216;&quot;</span></span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058526"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&#8217;&quot;</span></span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;is not possible for data types that receive three and more arguments of kind &#8216;Type&#8217;&quot;</span></span><span>
</span><span id="line-306"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058517"><span id="local-6989586621679058518"><span id="local-6989586621679058519"><span id="local-6989586621679058520"><span id="local-6989586621679058521"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058521"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679058520"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679058519"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058518"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058517"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-308"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058514"><span id="local-6989586621679058515"><span id="local-6989586621679058516"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058516"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>      </span><span class="annot"><a href="#local-6989586621679058515"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058514"><span class="hs-identifier hs-type">b</span></a></span><span>  </span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058510"><span id="local-6989586621679058511"><span id="local-6989586621679058512"><span id="local-6989586621679058513"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058513"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679058512"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>      </span><span class="annot"><a href="#local-6989586621679058511"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058510"><span class="hs-identifier hs-type">b</span></a></span><span>  </span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-310"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058508"><span id="local-6989586621679058509"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058509"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>           </span><span class="annot"><a href="#local-6989586621679058508"><span class="hs-identifier hs-type">a</span></a></span><span>    </span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-311"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058505"><span id="local-6989586621679058506"><span id="local-6989586621679058507"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058507"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679058506"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>           </span><span class="annot"><a href="#local-6989586621679058505"><span class="hs-identifier hs-type">a</span></a></span><span>    </span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span id="StarsOfHead"><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-var">StarsOfHead</span></a></span></span><span> </span><span id="local-6989586621679058504"><span class="annot"><span class="hs-identifier">_</span></span><span>      </span><span class="annot"><a href="#local-6989586621679058504"><span class="hs-identifier hs-type">a</span></a></span></span><span>                               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | This allows us to have different default implementations for 'prettyBy' and 'defaultPrettyBy'</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- depending on whether @a@ is a monomorphic type or a 'Functor' or a 'Bifunctor'. Read the docs of</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- 'prettyBy' for details.</span><span>
</span><span id="line-317"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059148"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059145"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059147"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DispatchDefaultFor"><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-var">DispatchDefaultFor</span></a></span></span><span> </span><span id="local-6989586621679059148"><span class="annot"><a href="#local-6989586621679059148"><span class="hs-identifier hs-type">target</span></a></span></span><span> </span><span id="local-6989586621679059147"><span class="annot"><a href="#local-6989586621679059147"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679059146"><span class="annot"><a href="#local-6989586621679059146"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059145"><span class="annot"><a href="#local-6989586621679059145"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>    </span><span id="dispatchDefaultFor"><span class="annot"><a href="Text.PrettyBy.Internal.html#dispatchDefaultFor"><span class="hs-identifier hs-type">dispatchDefaultFor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059141"><span class="annot"><a href="#local-6989586621679059146"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059145"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059141"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059138"><span id="local-6989586621679059139"><span id="local-6989586621679059140"><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059140"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059139"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679059139"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-type">DispatchDefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059140"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059138"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059139"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>    </span><span id="local-6989586621679058492"><span class="annot"><span class="annottext">dispatchDefaultFor :: forall ann. config -&gt; a -&gt; Doc ann
</span><a href="#local-6989586621679058492"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchDefaultFor</span></a></span></span><span> </span><span class="annot"><span class="annottext">config
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059126"><span id="local-6989586621679059127"><span id="local-6989586621679059128"><span id="local-6989586621679059129"><span id="local-6989586621679059130"><span id="local-6989586621679059131"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059131"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059130"><span class="hs-identifier hs-type">fa</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059129"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679059130"><span class="hs-identifier hs-type">fa</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059128"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059127"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-324"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059128"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059128"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059126"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059127"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-type">DispatchDefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059131"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059129"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679059126"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059130"><span class="hs-identifier hs-type">fa</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679058478"><span class="annot"><span class="annottext">dispatchDefaultFor :: forall ann. config -&gt; fa -&gt; Doc ann
</span><a href="#local-6989586621679058478"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchDefaultFor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) config a ann.
(Functor f, Pretty (f (AttachPrettyConfig config a))) =&gt;
config -&gt; f a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyFunctorBy"><span class="hs-identifier hs-var">defaultPrettyFunctorBy</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059110"><span id="local-6989586621679059111"><span id="local-6989586621679059112"><span id="local-6989586621679059113"><span id="local-6989586621679059114"><span id="local-6989586621679059115"><span id="local-6989586621679059116"><span id="local-6989586621679059117"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059117"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059116"><span class="hs-identifier hs-type">fab</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059115"><span class="hs-identifier hs-type">k1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059114"><span class="hs-identifier hs-type">k2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679059116"><span class="hs-identifier hs-type">fab</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059113"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059112"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059111"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-329"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Bifunctor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059113"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059113"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059110"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059112"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachPrettyConfig"><span class="hs-identifier hs-type">AttachPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059110"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059111"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-type">DispatchDefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059117"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059115"><span class="hs-identifier hs-type">k1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059114"><span class="hs-identifier hs-type">k2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679059110"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059116"><span class="hs-identifier hs-type">fab</span></a></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-331"></span><span>    </span><span id="local-6989586621679058464"><span class="annot"><span class="annottext">dispatchDefaultFor :: forall ann. config -&gt; fab -&gt; Doc ann
</span><a href="#local-6989586621679058464"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchDefaultFor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; * -&gt; *) config a b ann.
(Bifunctor f,
 Pretty
   (f (AttachPrettyConfig config a) (AttachPrettyConfig config b))) =&gt;
config -&gt; f a b -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyBifunctorBy"><span class="hs-identifier hs-var">defaultPrettyBifunctorBy</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-comment">-- | Introducing a class just for the nice name of the method and in case the defaulting machinery</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- somehow blows up in the user's face.</span><span>
</span><span id="line-335"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-type">DispatchDefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059205"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059205"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059203"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679059204"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059203"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-336"></span><span>            </span><span id="DefaultFor"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultFor"><span class="hs-identifier hs-var">DefaultFor</span></a></span></span><span> </span><span id="local-6989586621679059205"><span class="annot"><a href="#local-6989586621679059205"><span class="hs-identifier hs-type">target</span></a></span></span><span> </span><span id="local-6989586621679059204"><span class="annot"><a href="#local-6989586621679059204"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059203"><span class="annot"><a href="#local-6989586621679059203"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-337"></span><span>    </span><span id="defaultFor"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultFor"><span class="hs-identifier hs-type">defaultFor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059202"><span class="annot"><a href="#local-6989586621679059204"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059203"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059202"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059104"><span id="local-6989586621679059105"><span id="local-6989586621679059106"><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchDefaultFor"><span class="hs-identifier hs-type">DispatchDefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059106"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#StarsOfHead"><span class="hs-identifier hs-type">StarsOfHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059106"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059105"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679059104"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059105"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-340"></span><span>            </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultFor"><span class="hs-identifier hs-type">DefaultFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059106"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059104"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059105"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679058456"><span class="annot"><span class="annottext">defaultFor :: forall ann. config -&gt; a -&gt; Doc ann
</span><a href="#local-6989586621679058456"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultFor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (target :: Symbol) k config a ann.
DispatchDefaultFor target k config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#dispatchDefaultFor"><span class="hs-identifier hs-var">dispatchDefaultFor</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679059106"><span class="hs-identifier hs-type">target</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">-- ###################################################</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- ## The 'DefaultPrettyBy' class and its instances ##</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- ###################################################</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="hs-comment">-- | Same as 'AttachPrettyConfig', but for providing a 'Pretty' instance for anything that has</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- a 'DefaultPrettyBy' instance. Needed for the default implementation of 'defaultPrettyListBy'.</span><span>
</span><span id="line-349"></span><span class="hs-keyword">data</span><span> </span><span id="AttachDefaultPrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier hs-var">AttachDefaultPrettyConfig</span></a></span></span><span> </span><span id="local-6989586621679059093"><span class="annot"><a href="#local-6989586621679059093"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059092"><span class="annot"><a href="#local-6989586621679059092"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AttachDefaultPrettyConfig"><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier hs-var">AttachDefaultPrettyConfig</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679059093"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679059092"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058452"><span id="local-6989586621679059102"><span id="local-6989586621679059103"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059103"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059102"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier hs-type">AttachDefaultPrettyConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059103"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621679058450"><span class="annot"><span class="annottext">pretty :: forall ann. AttachDefaultPrettyConfig config a -&gt; Doc ann
</span><a href="#local-6989586621679058450"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier hs-type">AttachDefaultPrettyConfig</span></a></span><span> </span><span id="local-6989586621679058449"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058449"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679058448"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058448"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
DefaultPrettyBy config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-var">defaultPrettyBy</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058449"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058448"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-- | A class for pretty-printing values is some default manner. Basic example:</span><span>
</span><span id="line-355"></span><span class="hs-comment">--</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy () D where prettyBy () D = &quot;D&quot;</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- &gt;&gt;&gt; defaultPrettyBy () (Just D)</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-360"></span><span class="hs-comment">--</span><span>
</span><span id="line-361"></span><span class="hs-comment">-- 'DefaultPrettyBy' and 'PrettyBy' are mutually recursive in a sense: 'PrettyBy' delegates</span><span>
</span><span id="line-362"></span><span class="hs-comment">-- to 'DefaultPrettyBy' (provided the config supports defaults) when given a value of a type</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- supporting default pretty-printing and 'DefaultPrettyBy' delegates back to 'PrettyBy' for</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- elements of a polymorphic container.</span><span>
</span><span id="line-365"></span><span class="hs-comment">--</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- It is possible to extend the set of types supporting default pretty-printing. If you have a</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- @newtype@ wrapping a type that already supports default pretty-printing, then &quot;registering&quot;</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- that @newtype@ amounts to making a standalone newtype-deriving declaration:</span><span>
</span><span id="line-369"></span><span class="hs-comment">--</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- &gt;&gt;&gt; newtype AlsoInt = AlsoInt Int</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving newtype instance PrettyDefaultBy config Int =&gt; PrettyBy config AlsoInt</span><span>
</span><span id="line-372"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (AlsoInt 42)</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- 42</span><span>
</span><span id="line-374"></span><span class="hs-comment">--</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- Note that you have to use standalone deriving as</span><span>
</span><span id="line-376"></span><span class="hs-comment">--</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- &gt; newtype AlsoInt = AlsoInt Int deriving newtype (PrettyBy config)</span><span>
</span><span id="line-378"></span><span class="hs-comment">--</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- doesn't please GHC.</span><span>
</span><span id="line-380"></span><span class="hs-comment">--</span><span>
</span><span id="line-381"></span><span class="hs-comment">-- It's also good practice to preserve coherence of 'Pretty' and 'PrettyBy', so I'd also add</span><span>
</span><span id="line-382"></span><span class="hs-comment">-- @deriving newtype (Pretty)@ to the definition of @AlsoInt@, even though it's not necessary.</span><span>
</span><span id="line-383"></span><span class="hs-comment">--</span><span>
</span><span id="line-384"></span><span class="hs-comment">-- When you want to extend the set of types supporting default pretty-printing with a data type</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- that is a @data@ rather than a @newtype@, you can directly implement 'DefaultPrettyBy' and</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- and via-derive 'PrettyBy':</span><span>
</span><span id="line-387"></span><span class="hs-comment">--</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- &gt;&gt;&gt; instance DefaultPrettyBy config D where defaultPrettyBy _ D = &quot;D&quot;</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyCommon D instance PrettyDefaultBy config D =&gt; PrettyBy config D</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () D</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-393"></span><span class="hs-comment">--</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- But since it's best to preserve coherence of 'Pretty' and 'PrettyBy' for types supporting</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- default pretty-printing, it's recommended (not mandatory) to define a 'Pretty' instance and</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- anyclass-derive 'DefaultPrettyBy' in terms of it:</span><span>
</span><span id="line-397"></span><span class="hs-comment">--</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- &gt;&gt;&gt; instance Pretty D where pretty D = &quot;D&quot;</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- &gt;&gt;&gt; instance DefaultPrettyBy config D</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyCommon D instance PrettyDefaultBy config D =&gt; PrettyBy config D</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () [D, D, D]</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- [D, D, D]</span><span>
</span><span id="line-404"></span><span class="hs-comment">--</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- Note that 'DefaultPrettyBy' is specifically designed to handle __all__ configs in its instances,</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- i.e. you only specify a data type in a 'DefaultPrettyBy' instance and leave @config@ universally</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- quantified. This is because default pretty-printing behavior should be the same for all configs</span><span>
</span><span id="line-408"></span><span class="hs-comment">-- supporting default pretty-printing (it's the default after all). If you want to override the</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- defaults, read the docs of 'HasPrettyDefaults'.</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- Since @config@ in a 'DefaultPrettyBy' instance is meant to be universally quantified,</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- 'defaultPrettyBy' (the main method of 'DefaultPrettyBy') has to ignore the config in the</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- monomorphic case as it can't use it in any way anyway, i.e. in the monomorphic case</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- 'defaultPrettyBy' has the exact same info as simple 'pretty', which is another reason to</span><span>
</span><span id="line-415"></span><span class="hs-comment">-- anyclass-derive 'DefaultPrettyBy' in terms of 'Pretty'.</span><span>
</span><span id="line-416"></span><span class="hs-comment">--</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- Like in the case of 'prettyBy', the default implementation of 'defaultPrettyBy' for a 'Functor'</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- is 'defaultPrettyFunctorBy' (and for a 'Bifunctor' -- 'defaultPrettyBifunctorBy'):</span><span>
</span><span id="line-419"></span><span class="hs-comment">--</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- &gt;&gt;&gt; data Twice a = Twice a a deriving stock (Functor)</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- &gt;&gt;&gt; instance Pretty a =&gt; Pretty (Twice a) where pretty (Twice x y) = pretty x &lt;+&gt; &quot;&amp;&quot; &lt;+&gt; pretty y</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy config a =&gt; DefaultPrettyBy config (Twice a)</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyCommon (Twice a) instance PrettyDefaultBy config (Twice a) =&gt; PrettyBy config (Twice a)</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (Twice True False)</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- True &amp; False</span><span>
</span><span id="line-426"></span><span class="hs-comment">--</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- Since preserving coherence of 'Pretty' and 'PrettyBy' is only a good practice and not</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- mandatory, it's fine not to provide an instance for 'Pretty'. Then a 'DefaultPrettyBy' can be</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- implemented directly:</span><span>
</span><span id="line-430"></span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- &gt;&gt;&gt; data Twice a = Twice a a</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy config a =&gt; DefaultPrettyBy config (Twice a) where defaultPrettyBy config (Twice x y) = prettyBy config x &lt;+&gt; &quot;&amp;&quot; &lt;+&gt; prettyBy config y</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyCommon (Twice a) instance PrettyDefaultBy config (Twice a) =&gt; PrettyBy config (Twice a)</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (Twice True False)</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- True &amp; False</span><span>
</span><span id="line-436"></span><span class="hs-comment">--</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- But make sure that if both a 'Pretty' and a 'DefaultPrettyBy' instances exist, then they're in</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- sync.</span><span>
</span><span id="line-439"></span><span class="hs-keyword">class</span><span> </span><span id="DefaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-var">DefaultPrettyBy</span></a></span></span><span> </span><span id="local-6989586621679059101"><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059100"><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-comment">-- | Pretty-print a value of type @a@ in some default manner.</span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-comment">-- The default implementation works equally to the one of 'prettyBy'.</span><span>
</span><span id="line-442"></span><span>    </span><span id="defaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-type">defaultPrettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059099"><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059099"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="defaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-type">defaultPrettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059098"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultFor"><span class="hs-identifier hs-type">DefaultFor</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;defaultPrettyBy&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059098"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-444"></span><span>    </span><span id="local-6989586621679058445"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-var hs-var">defaultPrettyBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (target :: Symbol) config a ann.
DefaultFor target config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultFor"><span class="hs-identifier hs-var">defaultFor</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;defaultPrettyBy&quot;</span></span></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-comment">-- | 'defaultPrettyListBy' to 'prettyListBy' is what 'defaultPrettyBy' to 'prettyBy'.</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">-- The default implementation is \&quot;pretty-print the spine of a list the way 'pretty' does that</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- and pretty-print the elements using 'defaultPrettyBy'\&quot;.</span><span>
</span><span id="line-449"></span><span>    </span><span id="defaultPrettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyListBy"><span class="hs-identifier hs-type">defaultPrettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059091"><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059091"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="defaultPrettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyListBy"><span class="hs-identifier hs-type">defaultPrettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059097"><span class="annot"><a href="#local-6989586621679059101"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059100"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059097"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621679058441"><span class="annot"><a href="Text.PrettyBy.Internal.html#defaultPrettyListBy"><span class="hs-identifier hs-var hs-var">defaultPrettyListBy</span></a></span><span> </span><span id="local-6989586621679058438"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058438"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall config a. config -&gt; a -&gt; AttachDefaultPrettyConfig config a
</span><a href="Text.PrettyBy.Internal.html#AttachDefaultPrettyConfig"><span class="hs-identifier hs-var">AttachDefaultPrettyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058438"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">-- Monomorphic instances.</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058434"><span id="local-6989586621679058436"><span id="local-6989586621679059090"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059090"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Void</span></a></span></span></span></span><span>
</span><span id="line-456"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058429"><span id="local-6989586621679058431"><span id="local-6989586621679059089"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059089"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-457"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058425"><span id="local-6989586621679058427"><span id="local-6989586621679059088"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059088"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span></span></span><span>
</span><span id="line-458"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058421"><span id="local-6989586621679058423"><span id="local-6989586621679059087"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059087"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Natural</span></a></span></span></span></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058417"><span id="local-6989586621679058419"><span id="local-6989586621679059086"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059086"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span></span></span></span><span>
</span><span id="line-460"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058413"><span id="local-6989586621679058415"><span id="local-6989586621679059085"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059085"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span></span></span></span><span>
</span><span id="line-461"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058409"><span id="local-6989586621679058411"><span id="local-6989586621679059084"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059084"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int8</span></a></span></span></span></span><span>
</span><span id="line-462"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058405"><span id="local-6989586621679058407"><span id="local-6989586621679059083"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059083"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int16</span></a></span></span></span></span><span>
</span><span id="line-463"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058401"><span id="local-6989586621679058403"><span id="local-6989586621679059082"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059082"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int32</span></a></span></span></span></span><span>
</span><span id="line-464"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058397"><span id="local-6989586621679058399"><span id="local-6989586621679059081"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059081"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span></span></span><span>
</span><span id="line-465"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058393"><span id="local-6989586621679058395"><span id="local-6989586621679059080"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059080"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Word</span></a></span></span></span></span><span>
</span><span id="line-466"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058389"><span id="local-6989586621679058391"><span id="local-6989586621679059079"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059079"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word8</span></a></span></span></span></span><span>
</span><span id="line-467"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058385"><span id="local-6989586621679058387"><span id="local-6989586621679059078"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059078"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word16</span></a></span></span></span></span><span>
</span><span id="line-468"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058381"><span id="local-6989586621679058383"><span id="local-6989586621679059077"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059077"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word32</span></a></span></span></span></span><span>
</span><span id="line-469"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058377"><span id="local-6989586621679058379"><span id="local-6989586621679059076"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059076"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span></span></span></span><span>
</span><span id="line-470"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058373"><span id="local-6989586621679058375"><span id="local-6989586621679059075"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059075"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Float</span></a></span></span></span></span><span>
</span><span id="line-471"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058369"><span id="local-6989586621679058371"><span id="local-6989586621679059074"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059074"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span></span><span>
</span><span id="line-472"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058365"><span id="local-6989586621679058367"><span id="local-6989586621679059073"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059073"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Strict.Text</span></span></span></span></span><span>
</span><span id="line-473"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058361"><span id="local-6989586621679058363"><span id="local-6989586621679059072"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059072"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span></span></span></span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span class="hs-comment">-- Straightforward polymorphic instances.</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058357"><span id="local-6989586621679058359"><span id="local-6989586621679059070"><span id="local-6989586621679059071"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059071"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059070"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059071"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059070"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-478"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058353"><span id="local-6989586621679058355"><span id="local-6989586621679059067"><span id="local-6989586621679059068"><span id="local-6989586621679059069"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059069"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059068"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059069"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059068"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059067"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-479"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058349"><span id="local-6989586621679058351"><span id="local-6989586621679059064"><span id="local-6989586621679059065"><span id="local-6989586621679059066"><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059066"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059065"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059066"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059064"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059066"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059065"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679059064"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-comment">-- We don't have @Trifunctor@ in base, unfortunately, hence writing things out manually. Could we</span><span>
</span><span id="line-482"></span><span class="hs-comment">-- do that via generics? I feel like that would amount to implementing n-ary 'Functor' anyway.</span><span>
</span><span id="line-483"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058346"><span id="local-6989586621679059060"><span id="local-6989586621679059061"><span id="local-6989586621679059062"><span id="local-6989586621679059063"><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059063"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059062"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059063"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059061"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059063"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059060"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-484"></span><span>            </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059063"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059062"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679059061"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679059060"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>    </span><span id="local-6989586621679058340"><span class="annot"><span class="annottext">defaultPrettyBy :: forall ann. config -&gt; (a, b, c) -&gt; Doc ann
</span><a href="#local-6989586621679058340"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultPrettyBy</span></a></span></span><span> </span><span id="local-6989586621679058339"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058339"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679058338"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058338"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679058337"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679058337"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679058336"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679058336"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-486"></span><span>        </span><span class="annot"><span class="annottext">forall config r.
config -&gt; ((forall a. a -&gt; AttachPrettyConfig config a) -&gt; r) -&gt; r
</span><a href="Text.PrettyBy.Internal.html#withAttachPrettyConfig"><span class="hs-identifier hs-var">withAttachPrettyConfig</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058339"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679058335"><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058335"><span class="hs-identifier hs-var">attach</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058335"><span class="hs-identifier hs-var">attach</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058338"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058335"><span class="hs-identifier hs-var">attach</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679058337"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; AttachPrettyConfig config a
</span><a href="#local-6989586621679058335"><span class="hs-identifier hs-var">attach</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679058336"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- Peculiar instances.</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058333"><span id="local-6989586621679059055"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059055"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Strict.Text</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059055"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-491"></span><span>    </span><span id="local-6989586621679058330"><span class="annot"><span class="annottext">defaultPrettyListBy :: forall ann. config -&gt; [Char] -&gt; Doc ann
</span><a href="#local-6989586621679058330"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultPrettyListBy</span></a></span></span><span> </span><span id="local-6989586621679058329"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058329"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann. PrettyBy config a =&gt; config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#prettyBy"><span class="hs-identifier hs-var">prettyBy</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058329"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">Strict.pack</span></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058326"><span id="local-6989586621679059052"><span id="local-6989586621679059053"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059053"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059052"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059053"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059052"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-494"></span><span>    </span><span id="local-6989586621679058323"><span class="annot"><span class="annottext">defaultPrettyListBy :: forall ann. config -&gt; [Maybe a] -&gt; Doc ann
</span><a href="#local-6989586621679058323"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultPrettyListBy</span></a></span></span><span> </span><span id="local-6989586621679058322"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058322"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann. PrettyBy config a =&gt; config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-var">prettyListBy</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058322"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">catMaybes</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058318"><span id="local-6989586621679059048"><span id="local-6989586621679059049"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059049"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059048"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059049"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059048"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>    </span><span id="local-6989586621679058316"><span class="annot"><span class="annottext">defaultPrettyBy :: forall ann. config -&gt; [a] -&gt; Doc ann
</span><a href="#local-6989586621679058316"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultPrettyBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann. PrettyBy config a =&gt; config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-var">prettyListBy</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679058313"><span id="local-6989586621679059046"><span id="local-6989586621679059047"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059047"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059046"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059047"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059046"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-500"></span><span>    </span><span id="local-6989586621679058311"><span class="annot"><span class="annottext">defaultPrettyBy :: forall ann. config -&gt; NonEmpty a -&gt; Doc ann
</span><a href="#local-6989586621679058311"><span class="hs-identifier hs-var hs-var hs-var hs-var">defaultPrettyBy</span></a></span></span><span> </span><span id="local-6989586621679058310"><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058310"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679058309"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058309"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span id="local-6989586621679058308"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679058308"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann. PrettyBy config a =&gt; config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#prettyListBy"><span class="hs-identifier hs-var">prettyListBy</span></a></span><span> </span><span class="annot"><span class="annottext">config
</span><a href="#local-6989586621679058310"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679058309"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679058308"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-comment">-- ###########################################################</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- ## The 'NonDefaultPrettyBy' class and its none instances ##</span><span>
</span><span id="line-504"></span><span class="hs-comment">-- ###########################################################</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="hs-comment">-- | A class for overriding default pretty-printing behavior for types having it.</span><span>
</span><span id="line-507"></span><span class="hs-comment">-- Read the docs of 'HasPrettyDefaults' for how to use the class.</span><span>
</span><span id="line-508"></span><span class="hs-keyword">class</span><span> </span><span id="NonDefaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#NonDefaultPrettyBy"><span class="hs-identifier hs-var">NonDefaultPrettyBy</span></a></span></span><span> </span><span id="local-6989586621679059044"><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059043"><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-comment">-- | Pretty-print a value of a type supporting default pretty-printing in a possibly</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-comment">-- non-default way. The &quot;possibly&quot; is due to 'nonDefaultPrettyBy' having a default</span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-comment">-- implementation as 'defaultPrettyBy'. See docs for 'HasPrettyDefaults' for details.</span><span>
</span><span id="line-512"></span><span>    </span><span id="nonDefaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyBy"><span class="hs-identifier hs-type">nonDefaultPrettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059024"><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059024"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="nonDefaultPrettyBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyBy"><span class="hs-identifier hs-type">nonDefaultPrettyBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059042"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059042"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-514"></span><span>    </span><span id="local-6989586621679058305"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyBy"><span class="hs-identifier hs-var hs-var">nonDefaultPrettyBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
DefaultPrettyBy config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-var">defaultPrettyBy</span></a></span></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-comment">-- | 'nonDefaultPrettyListBy' to 'prettyListBy' is what 'nonDefaultPrettyBy' to 'prettyBy'.</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-comment">-- Analogously, the default implementation is 'defaultPrettyListBy'.</span><span>
</span><span id="line-518"></span><span>    </span><span id="nonDefaultPrettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyListBy"><span class="hs-identifier hs-type">nonDefaultPrettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059023"><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059023"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="nonDefaultPrettyListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyListBy"><span class="hs-identifier hs-type">nonDefaultPrettyListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059040"><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059044"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059043"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059040"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-520"></span><span>    </span><span id="local-6989586621679058301"><span class="annot"><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyListBy"><span class="hs-identifier hs-var hs-var">nonDefaultPrettyListBy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
DefaultPrettyBy config a =&gt;
config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyListBy"><span class="hs-identifier hs-var">defaultPrettyListBy</span></a></span></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="hs-comment">-- ####################################################################</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- ## Dispatching between 'DefaultPrettyBy' and 'NonDefaultPrettyBy' ##</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- ####################################################################</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-comment">-- | 'DispatchPrettyDefaultBy' is a class for dispatching on @HasPrettyDefaults config@:</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- if it's @'True@, then 'dispatchPrettyDefaultBy' is instantiated as 'defaultPrettyBy',</span><span>
</span><span id="line-528"></span><span class="hs-comment">-- otherwise as 'nonDefaultPrettyBy' (and similarly for 'dispatchPrettyDefaultListBy').</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- I.e. depending on whether a config allows to pretty-print values using default</span><span>
</span><span id="line-530"></span><span class="hs-comment">-- pretty-printing, either the default or non-default pretty-printing strategy is used.</span><span>
</span><span id="line-531"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-type">HasPrettyDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059038"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059039"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DispatchPrettyDefaultBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchPrettyDefaultBy"><span class="hs-identifier hs-var">DispatchPrettyDefaultBy</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679059039"><span class="annot"><a href="#local-6989586621679059039"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679059038"><span class="annot"><a href="#local-6989586621679059038"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span id="local-6989586621679059037"><span class="annot"><a href="#local-6989586621679059037"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-532"></span><span>    </span><span id="dispatchPrettyDefaultBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#dispatchPrettyDefaultBy"><span class="hs-identifier hs-type">dispatchPrettyDefaultBy</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059034"><span class="annot"><a href="#local-6989586621679059038"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059037"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059034"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-533"></span><span>    </span><span id="dispatchPrettyDefaultListBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#dispatchPrettyDefaultListBy"><span class="hs-identifier hs-type">dispatchPrettyDefaultListBy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679059033"><span class="annot"><a href="#local-6989586621679059038"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059037"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059033"><span class="hs-identifier hs-type">ann</span></a></span></span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059029"><span id="local-6989586621679059030"><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-type">HasPrettyDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059030"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DefaultPrettyBy"><span class="hs-identifier hs-type">DefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059030"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059029"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-536"></span><span>            </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchPrettyDefaultBy"><span class="hs-identifier hs-type">DispatchPrettyDefaultBy</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">True</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059030"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059029"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-537"></span><span>    </span><span id="local-6989586621679058284"><span class="annot"><span class="annottext">dispatchPrettyDefaultBy :: forall ann. config -&gt; a -&gt; Doc ann
</span><a href="#local-6989586621679058284"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchPrettyDefaultBy</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
DefaultPrettyBy config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyBy"><span class="hs-identifier hs-var">defaultPrettyBy</span></a></span><span>
</span><span id="line-538"></span><span>    </span><span id="local-6989586621679058282"><span class="annot"><span class="annottext">dispatchPrettyDefaultListBy :: forall ann. config -&gt; [a] -&gt; Doc ann
</span><a href="#local-6989586621679058282"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchPrettyDefaultListBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
DefaultPrettyBy config a =&gt;
config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#defaultPrettyListBy"><span class="hs-identifier hs-var">defaultPrettyListBy</span></a></span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059025"><span id="local-6989586621679059026"><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-type">HasPrettyDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059026"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#NonDefaultPrettyBy"><span class="hs-identifier hs-type">NonDefaultPrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059026"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059025"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-541"></span><span>            </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchPrettyDefaultBy"><span class="hs-identifier hs-type">DispatchPrettyDefaultBy</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059026"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059025"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-542"></span><span>    </span><span id="local-6989586621679058271"><span class="annot"><span class="annottext">dispatchPrettyDefaultBy :: forall ann. config -&gt; a -&gt; Doc ann
</span><a href="#local-6989586621679058271"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchPrettyDefaultBy</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
NonDefaultPrettyBy config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyBy"><span class="hs-identifier hs-var">nonDefaultPrettyBy</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span id="local-6989586621679058269"><span class="annot"><span class="annottext">dispatchPrettyDefaultListBy :: forall ann. config -&gt; [a] -&gt; Doc ann
</span><a href="#local-6989586621679058269"><span class="hs-identifier hs-var hs-var hs-var hs-var">dispatchPrettyDefaultListBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall config a ann.
NonDefaultPrettyBy config a =&gt;
config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#nonDefaultPrettyListBy"><span class="hs-identifier hs-var">nonDefaultPrettyListBy</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-comment">{- Note [Definition of PrettyDefaultBy]
A class alias throws &quot;this makes type inference for inner bindings fragile&quot; warnings
in user code, so we opt for a type alias in the definition of 'PrettyDefaultBy'.

I also tried the following representation

    class PrettyDefaultBy config a where
        type HasPrettyDefaults config :: Bool
        prettyDefaultsBy :: config -&gt; a -&gt; Doc ann
        prettyDefaultsListBy :: config -&gt; [a] -&gt; Doc ann

with both the methods having default implementations in terms of methods of the
'DispatchPrettyDefaultBy' class, so that 'PrettyDefaultBy' does not unwind to a creepy
type in errors, but then the user has to write things like

    instance DefaultPrettyBy () a =&gt; PrettyDefaultBy () a where
        type HasPrettyDefaults () = 'True

which is wordy and leaks 'DefaultPrettyBy' to the user, which is something that the user
does not see otherwise.

Instead, we fix the problem of 'PrettyDefaultBy' unwinding to a creepy type by using a custom
type error, 'HasPrettyDefaultsStuckError', which is thrown whenever @HasPrettyDefaults config@
is stuck. This way the user's code either type checks or gives a nice error and so the whole
'DispatchPrettyDefaultBy' thing does not leak to the user.

See https://kcsongor.github.io/report-stuck-families for how detection of a stuck type family
application is implemented.
-}</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span class="hs-comment">-- | Throw @err@ when @b@ is stuck.</span><span>
</span><span id="line-576"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ThrowOnStuck"><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier hs-var">ThrowOnStuck</span></a></span></span><span> </span><span id="local-6989586621679058268"><span class="annot"><a href="#local-6989586621679058268"><span class="hs-identifier hs-type">err</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679058267"><span class="annot"><a href="#local-6989586621679058267"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-577"></span><span>    </span><span id="ThrowOnStuck"><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier hs-var">ThrowOnStuck</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">True</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">True</span></a></span><span>
</span><span id="line-578"></span><span>    </span><span id="ThrowOnStuck"><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier hs-var">ThrowOnStuck</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">False</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">False</span></a></span><span>
</span><span id="line-579"></span><span>    </span><span id="ThrowOnStuck"><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier hs-var">ThrowOnStuck</span></a></span></span><span> </span><span id="local-6989586621679058266"><span class="annot"><a href="#local-6989586621679058266"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679058266"><span class="hs-identifier hs-type">err</span></a></span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="hs-comment">-- We have to use a type family here rather than a type alias, because otherwise it evaluates too early.</span><span>
</span><span id="line-582"></span><span class="hs-comment">-- | The error thrown when @HasPrettyDefaults config@ is stuck.</span><span>
</span><span id="line-583"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="HasPrettyDefaultsStuckError"><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaultsStuckError"><span class="hs-identifier hs-var">HasPrettyDefaultsStuckError</span></a></span></span><span> </span><span id="local-6989586621679058265"><span class="annot"><a href="#local-6989586621679058265"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-584"></span><span>    </span><span id="HasPrettyDefaultsStuckError"><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaultsStuckError"><span class="hs-identifier hs-var">HasPrettyDefaultsStuckError</span></a></span></span><span> </span><span id="local-6989586621679058264"><span class="annot"><a href="#local-6989586621679058264"><span class="hs-identifier hs-type hs-type">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span>
</span><span id="line-585"></span><span>        </span><span class="hs-special">(</span><span>     </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;No &#8217;HasPrettyDefaults&#8217; is specified for &quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">ShowType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058264"><span class="hs-identifier hs-type">config</span></a></span><span>
</span><span id="line-586"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Either you're trying to derive an instance, in which case you have to use&quot;</span></span><span>
</span><span id="line-587"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  standalone deriving and need to explicitly put a &#8216;PrettyDefaultBy config&#8217;&quot;</span></span><span>
</span><span id="line-588"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  constraint in the instance context for each type in your data type&quot;</span></span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  that supports default pretty-printing&quot;</span></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Or you're trying to pretty-print a value of a type supporting default&quot;</span></span><span>
</span><span id="line-591"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  pretty-printing using a config, for which &#8216;HasPrettyDefaults&#8217; is not specified.&quot;</span></span><span>
</span><span id="line-592"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  If the config is a bound type variable, then you need to add&quot;</span></span><span>
</span><span id="line-593"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;    &#8216;HasPrettyDefaults &lt;config_variable_name&gt; ~ 'True&#8217;&quot;</span></span><span>
</span><span id="line-594"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  to the context.&quot;</span></span><span>
</span><span id="line-595"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  If the config is a data type, then you need to add&quot;</span></span><span>
</span><span id="line-596"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;    &#8216;type instance HasPrettyDefaults &lt;config_name&gt; = 'True&#8217;&quot;</span></span><span>
</span><span id="line-597"></span><span>        </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  at the top level.&quot;</span></span><span>
</span><span id="line-598"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span class="hs-comment">-- | A version of 'HasPrettyDefaults' that is never stuck: it either immediately evaluates</span><span>
</span><span id="line-601"></span><span class="hs-comment">-- to a 'Bool' or fails with a 'TypeError'.</span><span>
</span><span id="line-602"></span><span class="hs-keyword">type</span><span> </span><span id="NonStuckHasPrettyDefaults"><span class="annot"><a href="Text.PrettyBy.Internal.html#NonStuckHasPrettyDefaults"><span class="hs-identifier hs-var">NonStuckHasPrettyDefaults</span></a></span></span><span> </span><span id="local-6989586621679058263"><span class="annot"><a href="#local-6989586621679058263"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-603"></span><span>    </span><span class="annot"><a href="Text.PrettyBy.Internal.html#ThrowOnStuck"><span class="hs-identifier hs-type">ThrowOnStuck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaultsStuckError"><span class="hs-identifier hs-type">HasPrettyDefaultsStuckError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058263"><span class="hs-identifier hs-type">config</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#HasPrettyDefaults"><span class="hs-identifier hs-type">HasPrettyDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058263"><span class="hs-identifier hs-type">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-604"></span><span>
</span><span id="line-605"></span><span class="hs-comment">-- See Note [Definition of PrettyDefaultBy].</span><span>
</span><span id="line-606"></span><span class="hs-comment">-- | @PrettyDefaultBy config a@ is the same thing as @PrettyBy config a@, when @a@ supports</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- default pretty-printing. Thus @PrettyDefaultBy config a@ and @PrettyBy config a@ are</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- interchangeable constraints for such types, but the latter throws an annoying</span><span>
</span><span id="line-609"></span><span class="hs-comment">-- \&quot;this makes type inference for inner bindings fragile\&quot; warning, unlike the former.</span><span>
</span><span id="line-610"></span><span class="hs-comment">-- @PrettyDefaultBy config a@ reads as \&quot;@a@ supports default pretty-printing and can be</span><span>
</span><span id="line-611"></span><span class="hs-comment">-- pretty-printed via @config@ in either default or non-default manner depending on whether</span><span>
</span><span id="line-612"></span><span class="hs-comment">-- @config@ supports default pretty-printing\&quot;.</span><span>
</span><span id="line-613"></span><span class="hs-keyword">type</span><span> </span><span id="PrettyDefaultBy"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-var">PrettyDefaultBy</span></a></span></span><span> </span><span id="local-6989586621679058262"><span class="annot"><a href="#local-6989586621679058262"><span class="hs-identifier hs-type">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#DispatchPrettyDefaultBy"><span class="hs-identifier hs-type">DispatchPrettyDefaultBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#NonStuckHasPrettyDefaults"><span class="hs-identifier hs-type">NonStuckHasPrettyDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058262"><span class="hs-identifier hs-type">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679058262"><span class="hs-identifier hs-type">config</span></a></span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-comment">-- | A newtype wrapper defined for its 'PrettyBy' instance that allows to via-derive a 'PrettyBy'</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- instance for a type supporting default pretty-printing.</span><span>
</span><span id="line-617"></span><span class="hs-keyword">newtype</span><span> </span><span id="PrettyCommon"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-var">PrettyCommon</span></a></span></span><span> </span><span id="local-6989586621679059022"><span class="annot"><a href="#local-6989586621679059022"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrettyCommon"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-var">PrettyCommon</span></a></span></span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unPrettyCommon"><span class="annot"><span class="annottext">forall a. PrettyCommon a -&gt; a
</span><a href="Text.PrettyBy.Internal.html#unPrettyCommon"><span class="hs-identifier hs-var hs-var">unPrettyCommon</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679059022"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-619"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span id="local-6989586621679059016"><span id="local-6989586621679059017"><span id="local-6989586621679059018"><span id="local-6989586621679059019"><span class="annot"><a href="Text.PrettyBy.Internal.html#coerceDispatchPrettyDefaults"><span class="hs-identifier hs-type">coerceDispatchPrettyDefaults</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Coercible</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059019"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059018"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679059017"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059019"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059016"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059017"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679059018"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span> </span><span class="annot"><a href="#local-6989586621679059016"><span class="hs-identifier hs-type">ann</span></a></span></span></span></span></span><span>
</span><span id="line-622"></span><span id="coerceDispatchPrettyDefaults"><span class="annot"><span class="annottext">coerceDispatchPrettyDefaults :: forall a b config ann.
Coercible a b =&gt;
(config -&gt; a -&gt; Doc ann) -&gt; config -&gt; b -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#coerceDispatchPrettyDefaults"><span class="hs-identifier hs-var hs-var">coerceDispatchPrettyDefaults</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">coerce :: forall a b. Coercible a b =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">coerce</span></a></span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679059005"><span id="local-6989586621679059006"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059006"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059005"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059006"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679059005"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-625"></span><span>    </span><span id="local-6989586621679058243"><span class="annot"><span class="annottext">prettyBy :: forall ann. config -&gt; PrettyCommon a -&gt; Doc ann
</span><a href="#local-6989586621679058243"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyBy</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b config ann.
Coercible a b =&gt;
(config -&gt; a -&gt; Doc ann) -&gt; config -&gt; b -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#coerceDispatchPrettyDefaults"><span class="hs-identifier hs-var">coerceDispatchPrettyDefaults</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679059005"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="annot"><span class="annottext">forall (b :: Bool) config a ann.
DispatchPrettyDefaultBy b config a =&gt;
config -&gt; a -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#dispatchPrettyDefaultBy"><span class="hs-identifier hs-var">dispatchPrettyDefaultBy</span></a></span><span>
</span><span id="line-626"></span><span>    </span><span id="local-6989586621679058240"><span class="annot"><span class="annottext">prettyListBy :: forall ann. config -&gt; [PrettyCommon a] -&gt; Doc ann
</span><a href="#local-6989586621679058240"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyListBy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b config ann.
Coercible a b =&gt;
(config -&gt; a -&gt; Doc ann) -&gt; config -&gt; b -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#coerceDispatchPrettyDefaults"><span class="hs-identifier hs-var">coerceDispatchPrettyDefaults</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679059005"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">forall (b :: Bool) config a ann.
DispatchPrettyDefaultBy b config a =&gt;
config -&gt; [a] -&gt; Doc ann
</span><a href="Text.PrettyBy.Internal.html#dispatchPrettyDefaultListBy"><span class="hs-identifier hs-var">dispatchPrettyDefaultListBy</span></a></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-comment">-- #######################################################################</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- ## 'PrettyBy' instances for types supporting default pretty-printing ##</span><span>
</span><span id="line-630"></span><span class="hs-comment">-- #######################################################################</span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-633"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () ([] :: [Void])</span><span>
</span><span id="line-634"></span><span class="hs-comment">-- []</span><span>
</span><span id="line-635"></span><span id="local-6989586621679058232"><span id="local-6989586621679058237"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058999"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Void</span></a></span></span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058999"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Void</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058999"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Void</span></a></span></span></span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-639"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () ()</span><span>
</span><span id="line-640"></span><span class="hs-comment">-- ()</span><span>
</span><span id="line-641"></span><span class="hs-comment">--</span><span>
</span><span id="line-642"></span><span class="hs-comment">-- The argument is not used:</span><span>
</span><span id="line-643"></span><span class="hs-comment">--</span><span>
</span><span id="line-644"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (error &quot;Strict?&quot; :: ())</span><span>
</span><span id="line-645"></span><span class="hs-comment">-- ()</span><span>
</span><span id="line-646"></span><span id="local-6989586621679058214"><span id="local-6989586621679058219"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058995"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-647"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058995"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058995"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-648"></span><span>
</span><span id="line-649"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-650"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () True</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-652"></span><span id="local-6989586621679058196"><span id="local-6989586621679058201"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058991"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058991"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058991"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span></span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (123 :: Natural)</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- 123</span><span>
</span><span id="line-658"></span><span id="local-6989586621679058178"><span id="local-6989586621679058183"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058987"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Natural</span></a></span></span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058987"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Natural</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058987"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Natural</span></a></span></span></span><span>
</span><span id="line-660"></span><span>
</span><span id="line-661"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-662"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (2^(123 :: Int) :: Integer)</span><span>
</span><span id="line-663"></span><span class="hs-comment">-- 10633823966279326983230456482242756608</span><span>
</span><span id="line-664"></span><span id="local-6989586621679058160"><span id="local-6989586621679058165"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058983"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span></span><span>
</span><span id="line-665"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058983"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058983"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span></span></span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-668"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (123 :: Int)</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- 123</span><span>
</span><span id="line-670"></span><span id="local-6989586621679058142"><span id="local-6989586621679058147"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058979"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span></span><span>
</span><span id="line-671"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058979"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058979"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span></span></span><span>
</span><span id="line-672"></span><span id="local-6989586621679058124"><span id="local-6989586621679058129"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058975"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int8</span></a></span></span><span>
</span><span id="line-673"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058975"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int8</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058975"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int8</span></a></span></span></span><span>
</span><span id="line-674"></span><span id="local-6989586621679058106"><span id="local-6989586621679058111"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058971"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int16</span></a></span></span><span>
</span><span id="line-675"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058971"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int16</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058971"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int16</span></a></span></span></span><span>
</span><span id="line-676"></span><span id="local-6989586621679058088"><span id="local-6989586621679058093"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058967"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int32</span></a></span></span><span>
</span><span id="line-677"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058967"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int32</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058967"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int32</span></a></span></span></span><span>
</span><span id="line-678"></span><span id="local-6989586621679058070"><span id="local-6989586621679058075"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058963"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span><span>
</span><span id="line-679"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058963"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int64</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058963"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Int64</span></a></span></span></span><span>
</span><span id="line-680"></span><span id="local-6989586621679058052"><span id="local-6989586621679058057"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058959"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Word</span></a></span></span><span>
</span><span id="line-681"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058959"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Word</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058959"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Word</span></a></span></span></span><span>
</span><span id="line-682"></span><span id="local-6989586621679058034"><span id="local-6989586621679058039"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058955"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word8</span></a></span></span><span>
</span><span id="line-683"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058955"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058955"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word8</span></a></span></span></span><span>
</span><span id="line-684"></span><span id="local-6989586621679058016"><span id="local-6989586621679058021"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058951"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word16</span></a></span></span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058951"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word16</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058951"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word16</span></a></span></span></span><span>
</span><span id="line-686"></span><span id="local-6989586621679057998"><span id="local-6989586621679058003"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058947"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word32</span></a></span></span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058947"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word32</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058947"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word32</span></a></span></span></span><span>
</span><span id="line-688"></span><span id="local-6989586621679057980"><span id="local-6989586621679057985"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058943"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span></span><span>
</span><span id="line-689"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058943"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058943"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span></span></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-692"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (pi :: Float)</span><span>
</span><span id="line-693"></span><span class="hs-comment">-- 3.1415927</span><span>
</span><span id="line-694"></span><span id="local-6989586621679057962"><span id="local-6989586621679057967"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058939"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Float</span></a></span></span><span>
</span><span id="line-695"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058939"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Float</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058939"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Float</span></a></span></span></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-698"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (pi :: Double)</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- 3.141592653589793</span><span>
</span><span id="line-700"></span><span id="local-6989586621679057944"><span id="local-6989586621679057949"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058935"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span></span><span>
</span><span id="line-701"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058935"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058935"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="hs-comment">-- | Automatically converts all newlines to @line@.</span><span>
</span><span id="line-704"></span><span class="hs-comment">--</span><span>
</span><span id="line-705"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (&quot;hello\nworld&quot; :: Strict.Text)</span><span>
</span><span id="line-706"></span><span class="hs-comment">-- hello</span><span>
</span><span id="line-707"></span><span class="hs-comment">-- world</span><span>
</span><span id="line-708"></span><span id="local-6989586621679057926"><span id="local-6989586621679057931"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058931"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Strict.Text</span></span></span><span>
</span><span id="line-709"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058931"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Strict.Text</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058931"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Strict.Text</span></span></span></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-comment">-- | An instance for lazy @Text@. Identitical to the strict one.</span><span>
</span><span id="line-712"></span><span id="local-6989586621679057908"><span id="local-6989586621679057913"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058927"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span></span><span>
</span><span id="line-713"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058927"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058927"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span></span></span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-716"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (Identity True)</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-718"></span><span id="local-6989586621679057890"><span id="local-6989586621679057895"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058922"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058921"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-719"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058922"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058922"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-722"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (False, &quot;abc&quot;)</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- (False, abc)</span><span>
</span><span id="line-724"></span><span id="local-6989586621679057872"><span id="local-6989586621679057877"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058915"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058913"><span id="local-6989586621679058914"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058914"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058913"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058915"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058914"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058913"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058915"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058914"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058913"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () ('a', &quot;bcd&quot;, True)</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- (a, bcd, True)</span><span>
</span><span id="line-730"></span><span id="local-6989586621679057854"><span id="local-6989586621679057859"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058906"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058903"><span id="local-6989586621679058904"><span id="local-6989586621679058905"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058904"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058903"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-731"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058906"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058904"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058903"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058906"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679058905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058904"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679058903"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="hs-comment">-- | Non-polykinded, because @Pretty (Const a b)@ is not polykinded either.</span><span>
</span><span id="line-734"></span><span class="hs-comment">--</span><span>
</span><span id="line-735"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (Const 1 :: Const Integer Bool)</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- 1</span><span>
</span><span id="line-737"></span><span id="local-6989586621679057836"><span id="local-6989586621679057841"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058895"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058893"><span id="local-6989586621679058894"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058894"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058893"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-738"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058895"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058894"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058893"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058895"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058894"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058893"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span class="hs-comment">-- | 'prettyBy' for @[a]@ is defined in terms of 'prettyListBy' by default.</span><span>
</span><span id="line-741"></span><span class="hs-comment">--</span><span>
</span><span id="line-742"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () [True, False]</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- [True, False]</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () &quot;abc&quot;</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- abc</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () [Just False, Nothing, Just True]</span><span>
</span><span id="line-747"></span><span class="hs-comment">-- [False, True]</span><span>
</span><span id="line-748"></span><span id="local-6989586621679057818"><span id="local-6989586621679057823"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058888"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058887"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679058887"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-749"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058888"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679058887"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058888"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679058887"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="hs-comment">-- | 'prettyBy' for @NonEmpty a@ is defined in terms of 'prettyListBy' by default.</span><span>
</span><span id="line-752"></span><span class="hs-comment">--</span><span>
</span><span id="line-753"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (True :| [False])</span><span>
</span><span id="line-754"></span><span class="hs-comment">-- [True, False]</span><span>
</span><span id="line-755"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () ('a' :| &quot;bc&quot;)</span><span>
</span><span id="line-756"></span><span class="hs-comment">-- abc</span><span>
</span><span id="line-757"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () (Just False :| [Nothing, Just True])</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- [False, True]</span><span>
</span><span id="line-759"></span><span id="local-6989586621679057800"><span id="local-6989586621679057805"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058882"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058881"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-760"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058882"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058882"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-- | By default a 'String' (i.e. @[Char]@) is converted to a @Text@ first and then pretty-printed.</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- So make sure that if you have any non-default pretty-printing for @Char@ or @Text@,</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- they're in sync.</span><span>
</span><span id="line-765"></span><span class="hs-comment">--</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () 'a'</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- a</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () &quot;abc&quot;</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- abc</span><span>
</span><span id="line-770"></span><span id="local-6989586621679057782"><span id="local-6989586621679057787"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058877"><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span></span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058877"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058877"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Char</span></a></span></span></span><span>
</span><span id="line-772"></span><span>
</span><span id="line-773"></span><span class="hs-comment">-- | By default a @[Maybe a]@ is converted to @[a]@ first and only then pretty-printed.</span><span>
</span><span id="line-774"></span><span class="hs-comment">--</span><span>
</span><span id="line-775"></span><span class="hs-comment">-- &gt;&gt;&gt; braces $ prettyBy () (Just True)</span><span>
</span><span id="line-776"></span><span class="hs-comment">-- {True}</span><span>
</span><span id="line-777"></span><span class="hs-comment">-- &gt;&gt;&gt; braces $ prettyBy () (Nothing :: Maybe Bool)</span><span>
</span><span id="line-778"></span><span class="hs-comment">-- {}</span><span>
</span><span id="line-779"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () [Just False, Nothing, Just True]</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- [False, True]</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy () [Nothing, Just 'a', Just 'b', Nothing, Just 'c']</span><span>
</span><span id="line-782"></span><span class="hs-comment">-- abc</span><span>
</span><span id="line-783"></span><span id="local-6989586621679057764"><span id="local-6989586621679057769"><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679058872"><span class="hs-keyword">via</span><span> </span><span id="local-6989586621679058871"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyCommon"><span class="hs-identifier hs-type">PrettyCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058871"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyDefaultBy"><span class="hs-identifier hs-type">PrettyDefaultBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058872"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058871"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyBy"><span class="hs-identifier hs-type">PrettyBy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058872"><span class="hs-identifier hs-type">config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679058871"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span class="hs-comment">-- #############################</span><span>
</span><span id="line-787"></span><span class="hs-comment">-- ## The 'PrettyAny' newtype ##</span><span>
</span><span id="line-788"></span><span class="hs-comment">-- #############################</span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span class="hs-comment">-- | A @newtype@ wrapper around @a@ provided for the purporse of defining 'PrettyBy' instances</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- handling any @a@. For example you can wrap values with the @PrettyAny@ constructor directly</span><span>
</span><span id="line-792"></span><span class="hs-comment">-- like in this last line of</span><span>
</span><span id="line-793"></span><span class="hs-comment">--</span><span>
</span><span id="line-794"></span><span class="hs-comment">-- &gt;&gt;&gt; data ViaShow = ViaShow</span><span>
</span><span id="line-795"></span><span class="hs-comment">-- &gt;&gt;&gt; instance Show a =&gt; PrettyBy ViaShow (PrettyAny a) where prettyBy ViaShow = pretty . show . unPrettyAny</span><span>
</span><span id="line-796"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy ViaShow $ PrettyAny True</span><span>
</span><span id="line-797"></span><span class="hs-comment">-- True</span><span>
</span><span id="line-798"></span><span class="hs-comment">--</span><span>
</span><span id="line-799"></span><span class="hs-comment">-- or you can use the type to via-derive instances:</span><span>
</span><span id="line-800"></span><span class="hs-comment">--</span><span>
</span><span id="line-801"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D deriving stock (Show)</span><span>
</span><span id="line-802"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyAny D instance PrettyBy ViaShow D</span><span>
</span><span id="line-803"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy ViaShow D</span><span>
</span><span id="line-804"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-805"></span><span class="hs-comment">--</span><span>
</span><span id="line-806"></span><span class="hs-comment">-- One important use case is handling sum-type configs. For example having two configs you can</span><span>
</span><span id="line-807"></span><span class="hs-comment">-- define their sum and derive 'PrettyBy' for the unified config in terms of its components:</span><span>
</span><span id="line-808"></span><span class="hs-comment">--</span><span>
</span><span id="line-809"></span><span class="hs-comment">-- &gt;&gt;&gt; data UpperCase = UpperCase</span><span>
</span><span id="line-810"></span><span class="hs-comment">-- &gt;&gt;&gt; data LowerCase = LowerCase</span><span>
</span><span id="line-811"></span><span class="hs-comment">-- &gt;&gt;&gt; data Case = CaseUpperCase UpperCase | CaseLowerCase LowerCase</span><span>
</span><span id="line-812"></span><span class="hs-comment">-- &gt;&gt;&gt; instance (PrettyBy UpperCase a, PrettyBy LowerCase a) =&gt; PrettyBy Case (PrettyAny a) where prettyBy (CaseUpperCase upper) = prettyBy upper . unPrettyAny; prettyBy (CaseLowerCase lower) = prettyBy lower . unPrettyAny</span><span>
</span><span id="line-813"></span><span class="hs-comment">--</span><span>
</span><span id="line-814"></span><span class="hs-comment">-- Then having a data type implementing both @PrettyBy UpperCase@ and @PrettyBy LowerCase@ you can</span><span>
</span><span id="line-815"></span><span class="hs-comment">-- derive @PrettyBy Case@ for that data type:</span><span>
</span><span id="line-816"></span><span class="hs-comment">--</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- &gt;&gt;&gt; data D = D</span><span>
</span><span id="line-818"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy UpperCase D where prettyBy UpperCase D = &quot;D&quot;</span><span>
</span><span id="line-819"></span><span class="hs-comment">-- &gt;&gt;&gt; instance PrettyBy LowerCase D where prettyBy LowerCase D = &quot;d&quot;</span><span>
</span><span id="line-820"></span><span class="hs-comment">-- &gt;&gt;&gt; deriving via PrettyAny D instance PrettyBy Case D</span><span>
</span><span id="line-821"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy UpperCase D</span><span>
</span><span id="line-822"></span><span class="hs-comment">-- D</span><span>
</span><span id="line-823"></span><span class="hs-comment">-- &gt;&gt;&gt; prettyBy LowerCase D</span><span>
</span><span id="line-824"></span><span class="hs-comment">-- d</span><span>
</span><span id="line-825"></span><span class="hs-comment">--</span><span>
</span><span id="line-826"></span><span class="hs-comment">-- Look into @test/Universal.hs@ for an extended example.</span><span>
</span><span id="line-827"></span><span class="hs-keyword">newtype</span><span> </span><span id="PrettyAny"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyAny"><span class="hs-identifier hs-var">PrettyAny</span></a></span></span><span> </span><span id="local-6989586621679058870"><span class="annot"><a href="#local-6989586621679058870"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrettyAny"><span class="annot"><a href="Text.PrettyBy.Internal.html#PrettyAny"><span class="hs-identifier hs-var">PrettyAny</span></a></span></span><span>
</span><span id="line-828"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unPrettyAny"><span class="annot"><span class="annottext">forall a. PrettyAny a -&gt; a
</span><a href="Text.PrettyBy.Internal.html#unPrettyAny"><span class="hs-identifier hs-var hs-var">unPrettyAny</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679058870"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-829"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-832"></span><span class="hs-comment">--</span><span>
</span><span id="line-833"></span><span class="hs-comment">-- (Definitions for the doctests)</span><span>
</span><span id="line-834"></span><span class="hs-comment">--</span><span>
</span><span id="line-835"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XDataKinds</span><span>
</span><span id="line-836"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XDeriveFunctor</span><span>
</span><span id="line-837"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XDerivingVia</span><span>
</span><span id="line-838"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XFlexibleContexts</span><span>
</span><span id="line-839"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XFlexibleInstances</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XGeneralizedNewtypeDeriving</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XMultiParamTypeClasses</span><span>
</span><span id="line-842"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XStandaloneDeriving</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XTypeFamilies</span><span>
</span><span id="line-845"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XUndecidableInstances</span><span>
</span><span id="line-846"></span></pre></body></html>